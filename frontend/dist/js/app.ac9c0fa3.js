(function(){"use strict";var e={2559:function(e,t,o){var s=o(5130),r=o(6768),a=o(4232);const n=["data-theme"],i={key:1,class:"container"},l={class:"grid"};function c(e,t,o,s,c,d){const m=(0,r.g2)("Preloader"),h=(0,r.g2)("AddNoteModal"),u=(0,r.g2)("NoteDialog"),p=(0,r.g2)("Footer");return(0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["schedule",{"tg-theme":c.isTelegram}]),"data-theme":c.isDarkTheme?"dark":"light"},[c.isLoading?((0,r.uX)(),(0,r.Wv)(m,{key:0,isTelegram:c.isTelegram,isDark:c.isDarkTheme},null,8,["isTelegram","isDark"])):((0,r.uX)(),(0,r.CE)("div",i,[(0,r.Lk)("div",l,[((0,r.uX)(),(0,r.Wv)(r.PR,null,[((0,r.uX)(),(0,r.Wv)((0,r.$y)(d.currentComponent)))],1024))])])),(0,r.bF)(h),(0,r.bF)(u),(0,r.bF)(p)],10,n)}var d=o(782);function m(e,t,o,s,a,n){const i=(0,r.g2)("Slider"),l=(0,r.g2)("GroupInfo"),c=(0,r.g2)("Search"),d=(0,r.g2)("ScheduleTable"),m=(0,r.g2)("Buttons");return(0,r.uX)(),(0,r.CE)(r.FK,null,[(0,r.bF)(i),(0,r.bF)(l),(0,r.bF)(c),(0,r.bF)(d),(0,r.bF)(m)],64)}const h={class:"top"},u={class:"top__title"};function p(e,t,o,s,n,i){return(0,r.uX)(),(0,r.CE)("header",h,[(0,r.Lk)("h2",u,(0,a.v_)(o.title),1)])}var g={name:"Header",props:{title:{type:String,required:!0}}},C=o(1241);const T=(0,C.A)(g,[["render",p],["__scopeId","data-v-36bfc327"]]);var f=T;const k=["fill"],y={class:"slider-days"},w=["onClick"],b={class:"date-container"},_={class:"slider__day-week"},E=["fill"];function D(e,t,o,n,i,l){return(0,r.uX)(),(0,r.CE)("section",{class:(0,a.C4)(["slider",{"tg-theme":i.isTelegram,"tg-dark":i.isDarkTheme}])},[((0,r.uX)(),(0,r.CE)("svg",{class:(0,a.C4)(["slider__left",{"slider__arrow-disabled":i.weekOffset<=-2}]),width:"6",height:"10",viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t[0]||(t[0]=(...e)=>l.prevWeek&&l.prevWeek(...e))},[(0,r.Lk)("path",{d:"M5.74688 0.246261C5.66733 0.168229 5.57268 0.106294 5.46841 0.0640274C5.36413 0.021761 5.25228 0 5.13931 0C5.02635 0 4.9145 0.021761 4.81022 0.0640274C4.70594 0.106294 4.6113 0.168229 4.53175 0.246261L0.253122 4.4089C0.172916 4.4863 0.109255 4.57838 0.0658112 4.67983C0.0223672 4.78128 0 4.8901 0 5C0 5.1099 0.0223672 5.21872 0.0658112 5.32017C0.109255 5.42162 0.172916 5.5137 0.253122 5.5911L4.53175 9.75374C4.6113 9.83177 4.70594 9.89371 4.81022 9.93597C4.9145 9.97824 5.02635 10 5.13931 10C5.25228 10 5.36413 9.97824 5.46841 9.93597C5.57268 9.89371 5.66733 9.83177 5.74688 9.75374C5.82708 9.67634 5.89074 9.58427 5.93419 9.48281C5.97763 9.38136 6 9.27255 6 9.16264C6 9.05274 5.97763 8.94392 5.93419 8.84247C5.89074 8.74102 5.82708 8.64894 5.74688 8.57155L2.06726 5L5.74688 1.42845C5.82708 1.35106 5.89074 1.25898 5.93419 1.15753C5.97763 1.05608 6 0.94726 6 0.837356C6 0.727452 5.97763 0.618636 5.93419 0.517185C5.89074 0.415733 5.82708 0.323655 5.74688 0.246261Z",fill:i.weekOffset<=-2?"#CCCCCC":"#1E1E1E"},null,8,k)],2)),(0,r.Lk)("div",y,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.days,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:"day-"+t,class:(0,a.C4)(["slider__day",{"slider__day-active":e.isActive,"slider__day-prev-active":e.isCurrentDay}]),onClick:e=>l.handleDayClick(t)},[(0,r.Lk)("div",b,[(0,r.bF)(s.eB,{name:"date-flip",mode:"out-in"},{default:(0,r.k6)((()=>[((0,r.uX)(),(0,r.CE)("p",{key:e.date,class:"slider__day-date"},(0,a.v_)(e.date),1))])),_:2},1024)]),(0,r.Lk)("h2",_,(0,a.v_)(e.weekDay),1)],10,w)))),128))]),((0,r.uX)(),(0,r.CE)("svg",{class:(0,a.C4)(["slider__right",{"slider__arrow-disabled":i.weekOffset>=2}]),width:"6",height:"10",viewBox:"0 0 6 10",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t[1]||(t[1]=(...e)=>l.nextWeek&&l.nextWeek(...e))},[(0,r.Lk)("path",{d:"M0.253122 0.246261C0.332673 0.168229 0.427317 0.106294 0.531595 0.0640274C0.635873 0.021761 0.747721 0 0.860687 0C0.973653 0 1.0855 0.021761 1.18978 0.0640274C1.29406 0.106294 1.3887 0.168229 1.46825 0.246261L5.74688 4.4089C5.82708 4.4863 5.89074 4.57838 5.93419 4.67983C5.97763 4.78128 6 4.8901 6 5C6 5.1099 5.97763 5.21872 5.93419 5.32017C5.89074 5.42162 5.82708 5.5137 5.74688 5.5911L1.46825 9.75374C1.3887 9.83177 1.29406 9.89371 1.18978 9.93597C1.0855 9.97824 0.973653 10 0.860687 10C0.747721 10 0.635873 9.97824 0.531595 9.93597C0.427317 9.89371 0.332673 9.83177 0.253122 9.75374C0.172916 9.67634 0.109255 9.58427 0.0658112 9.48281C0.022367 9.38136 0 9.27255 0 9.16264C0 9.05274 0.022367 8.94392 0.0658112 8.84247C0.109255 8.74102 0.172916 8.64894 0.253122 8.57155L3.93274 5L0.253122 1.42845C0.172916 1.35106 0.109255 1.25898 0.0658112 1.15753C0.022367 1.05608 0 0.94726 0 0.837356C0 0.727452 0.022367 0.618636 0.0658112 0.517185C0.109255 0.415733 0.172916 0.323655 0.253122 0.246261Z",fill:i.weekOffset>=2?"#CCCCCC":"#1E1E1E"},null,8,E)],2))],2)}o(8111),o(116),o(7588),o(1701);var v={name:"Slider",data(){const e=new Date;let t=0;return 0===e.getDay()&&(t=1),{weekOffset:t,weekDays:["Пн","Вт","Ср","Чт","Пт","Сб"],fullDayNames:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],monthNames:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],days:[],selectedDate:null,todayAdjusted:new Date,isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},computed:{...(0,d.L8)(["selectedDayIndex","days","currentWeekType","currentWeekNumber"]),currentDayIndex(){const e=new Date;return 0===e.getDay()?0:e.getDay()-1}},created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme(),this.setupTelegramBackButton(),window.Telegram.WebApp.expand())},methods:{...(0,d.i0)(["setSelectedDay","setCurrentWeekType"]),initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||"#ffffff"),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||"#000000"),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||"#707579"),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||"#f4f4f5"),document.documentElement.style.setProperty("--tg-disabled",this.tgThemeParams.disabled||"#5c5c5c")},setupTelegramBackButton(){const e=window.Telegram.WebApp;e.BackButton.show(),e.BackButton.onClick((()=>{e.close()}))},resetWeekState(){this.weekOffset=0,localStorage.removeItem("currentWeekNumber"),this.updateDays()},handleDayClick(e){const t=new Date(this.days[e].originalDate);this.selectedDate=t,this.setSelectedDay({fullDayName:this.fullDayNames[e],date:t.getDate(),month:this.monthNames[t.getMonth()],originalDate:t,dayIndex:e}),this.updateWeekNumber(),this.updateDays()},isSameDay(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()},updateDays(){const e=new Date;0===e.getDay()?(this.todayAdjusted=new Date(e),this.todayAdjusted.setDate(e.getDate()+1)):this.todayAdjusted=new Date(e);const t=new Date(this.todayAdjusted);t.setDate(t.getDate()+7*this.weekOffset);const o=0===t.getDay()?6:t.getDay()-1;t.setDate(t.getDate()-o);const s=this.weekDays.map(((e,o)=>{const s=new Date(t);s.setDate(t.getDate()+o);const r=this.isSameDay(s,this.todayAdjusted),a=this.selectedDate?s.getDay()===this.selectedDate.getDay():r;return{date:s.getDate().toString().padStart(2,"0"),weekDay:e,fullDayName:this.fullDayNames[o],month:this.monthNames[s.getMonth()],originalDate:s,isCurrentDay:r,isActive:a}}));if(this.$store.commit("SET_DAYS",s),this.days=s,!this.selectedDate){const e=s.find((e=>e.isActive));if(e){this.selectedDate=e.originalDate;const t=s.findIndex((e=>e.isActive));this.setSelectedDay({fullDayName:e.fullDayName,date:e.date,month:e.month,originalDate:e.originalDate,dayIndex:t})}}},prevWeek(){this.weekOffset>-2&&(this.weekOffset--,this.updateWeekNumber(),this.updateDays())},nextWeek(){this.weekOffset<2&&(this.weekOffset++,this.updateWeekNumber(),this.updateDays())},updateWeekNumber(){const e=this.$store.state.baseWeekNumber;if(e){let t=e;0!==this.weekOffset&&(t=(e+this.weekOffset)%2,t=0===t?2:t),console.log("Updating week number:",{baseWeek:e,offset:this.weekOffset,newWeekNumber:t}),this.$store.commit("SET_CURRENT_WEEK_NUMBER",t),this.$store.commit("SET_CURRENT_WEEK_TYPE",`week${t}`)}},updateWeekType(){const e=this.$store.getters.getWeekTypeByOffset(this.weekOffset);this.$store.dispatch("setCurrentWeekType",e)}},watch:{currentGroup(){this.resetWeekState()},currentTeacher(){this.resetWeekState()},currentRoom(){this.resetWeekState()},selectedDayIndex(e){if(void 0!==e&&this.days[e]){const t=this.days[e];this.selectedDate=t.originalDate,this.days.forEach(((t,o)=>{t.isActive=o===e}))}}},mounted(){const e=new Date;0===e.getDay()&&(this.weekOffset=1),this.updateDays()}};const S=(0,C.A)(v,[["render",D],["__scopeId","data-v-be69e494"]]);var N=S;const L={class:"name"},W={class:"name__title"},M={key:0},P={key:1},A={key:2},x={class:"name__week"},I={key:0};function H(e,t,o,s,n,i){return(0,r.uX)(),(0,r.CE)("section",L,[(0,r.Lk)("h1",W,[e.currentGroup?((0,r.uX)(),(0,r.CE)("span",M,(0,a.v_)(i.formattedGroupName),1)):e.currentTeacher?((0,r.uX)(),(0,r.CE)("span",P,(0,a.v_)(i.formattedTeacherName),1)):e.currentRoom?((0,r.uX)(),(0,r.CE)("span",A,(0,a.v_)(e.currentRoom),1)):(0,r.Q3)("",!0)]),t[0]||(t[0]=(0,r.Lk)("strong",{class:"name__slash"},"|",-1)),(0,r.Lk)("h2",x,[(0,r.eW)((0,a.v_)(i.weekName)+" ",1),n.debugInfo?((0,r.uX)(),(0,r.CE)("span",I,"(Неделя API: "+(0,a.v_)(i.apiWeekNumber)+", Смещение: "+(0,a.v_)(i.weekOffset)+")",1)):(0,r.Q3)("",!0)])])}var O={name:"GroupInfo",data(){return{debugInfo:!1}},computed:{...(0,d.L8)(["currentGroup","currentTeacher","currentRoom","currentWeekNumber","baseWeekNumber","currentWeekOffset"]),apiWeekNumber(){return this.baseWeekNumber||"N/A"},weekName(){return` Неделя ${this.currentWeekNumber}`},weekOffset(){return this.currentWeekOffset||0},formattedTeacherName(){if(!this.currentTeacher)return"";const e=this.currentTeacher.split("_");let t=this.capitalizeFirstLetter(e[0]);return e.length>1&&e[1]&&(t+=` ${this.capitalizeFirstLetter(e[1])}.`),e.length>2&&e[2]&&(t+=` ${this.capitalizeFirstLetter(e[2])}.`),t},formattedGroupName(){if(!this.currentGroup)return"";const e=this.currentGroup.search(/\d/);if(-1===e)return this.currentGroup.toUpperCase();const t=this.currentGroup.slice(0,e).toUpperCase(),o=this.currentGroup.slice(e);return t+o}},methods:{capitalizeFirstLetter(e){return e?e.charAt(0).toUpperCase()+e.slice(1).toLowerCase():""}}};const R=(0,C.A)(O,[["render",H],["__scopeId","data-v-ee065612"]]);var B=R;const F={key:0,class:"search-error"},V=["fill"],$=["fill"];function U(e,t,o,n,i,l){return(0,r.uX)(),(0,r.CE)("section",{class:(0,a.C4)(["search",{"tg-theme":i.isTelegram,"tg-dark":i.isDarkTheme}])},[(0,r.bo)((0,r.Lk)("input",{class:"search__input",type:"text","onUpdate:modelValue":t[0]||(t[0]=e=>i.searchInput=e),placeholder:"Группа, преподаватель, аудитория",onKeyup:t[1]||(t[1]=(0,s.jR)(((...e)=>l.handleSearch&&l.handleSearch(...e)),["enter"]))},null,544),[[s.Jo,i.searchInput]]),(0,r.bF)(s.eB,{name:"fade"},{default:(0,r.k6)((()=>[i.errorMessage?((0,r.uX)(),(0,r.CE)("div",F,(0,a.v_)(i.errorMessage),1)):(0,r.Q3)("",!0)])),_:1}),((0,r.uX)(),(0,r.CE)("svg",{class:"search__loupe btn",width:"13",height:"13",viewBox:"0 0 13 13",fill:"none",xmlns:"http://www.w3.org/2000/svg",onClick:t[2]||(t[2]=(...e)=>l.handleSearch&&l.handleSearch(...e))},[(0,r.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M1.46466 1.40156C1.00031 1.86591 0.631959 2.41718 0.380652 3.02389C0.129346 3.6306 6.91942e-09 4.28086 0 4.93756C-6.91942e-09 5.59426 0.129346 6.24452 0.380652 6.85123C0.631959 7.45794 1.00031 8.0092 1.46466 8.47356C1.92901 8.93791 2.48028 9.30626 3.08699 9.55757C3.6937 9.80887 4.34396 9.93822 5.00066 9.93822C5.65736 9.93822 6.30762 9.80887 6.91433 9.55757C7.52104 9.30626 8.0723 8.93791 8.53666 8.47356C9.44745 7.53055 9.95142 6.26754 9.94003 4.95655C9.92864 3.64557 9.40279 2.39151 8.47575 1.46447C7.54871 0.537426 6.29465 0.0115811 4.98366 0.000189013C3.67268 -0.0112031 2.40967 0.492769 1.46666 1.40356M7.83066 7.76756C7.46074 8.14579 7.01946 8.44687 6.53238 8.65339C6.04529 8.8599 5.52208 8.96773 4.99303 8.97065C4.46399 8.97356 3.93962 8.8715 3.45029 8.67036C2.96096 8.46922 2.51639 8.17302 2.14233 7.79889C1.76826 7.42476 1.47213 6.98014 1.27108 6.49077C1.07003 6.00141 0.968061 5.47702 0.971068 4.94797C0.974075 4.41893 1.082 3.89573 1.2886 3.40869C1.4952 2.92164 1.79637 2.48041 2.17466 2.11056C2.92767 1.37434 3.94064 0.964788 4.99374 0.970774C6.04683 0.976759 7.05508 1.3978 7.79968 2.14253C8.54428 2.88726 8.96514 3.89558 8.97094 4.94868C8.97674 6.00178 8.56701 7.01468 7.83066 7.76756Z",fill:i.isTelegram?"var(--tg-button-text-color)":"white"},null,8,V),(0,r.Lk)("path",{d:"M7.82859 9.20055C7.64108 9.01291 7.53579 8.75847 7.53589 8.4932C7.53598 8.22793 7.64145 7.97356 7.82909 7.78605C8.01673 7.59854 8.27117 7.49325 8.53644 7.49335C8.80172 7.49344 9.05608 7.59891 9.24359 7.78655L12.0716 10.6155C12.1671 10.7078 12.2433 10.8181 12.2957 10.9401C12.3481 11.0621 12.3757 11.1934 12.3768 11.3261C12.378 11.4589 12.3527 11.5906 12.3024 11.7135C12.2521 11.8364 12.1779 11.9481 12.084 12.0419C11.9901 12.1358 11.8784 12.2101 11.7555 12.2604C11.6326 12.3107 11.501 12.336 11.3682 12.3348C11.2354 12.3336 11.1042 12.3061 10.9822 12.2537C10.8602 12.2012 10.7498 12.1251 10.6576 12.0295L7.82859 9.20055Z",fill:i.isTelegram?"var(--tg-button-text-color)":"white"},null,8,$)]))],2)}var X={name:"Search",data(){return{searchInput:"",errorMessage:"",isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme(),this.setupTelegramBackButton(),window.Telegram.WebApp.expand())},methods:{...(0,d.i0)(["searchSchedule"]),initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||"#ffffff"),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||"#000000"),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||"#707579"),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||"#f4f4f5"),document.documentElement.style.setProperty("--tg-disabled",this.tgThemeParams.disabled||"#5c5c5c")},setupTelegramBackButton(){const e=window.Telegram.WebApp;e.BackButton.show(),e.BackButton.onClick((()=>{e.close()}))},formatGroupName(e){if(!e)return e;const t=e.search(/\d/);if(-1===t)return e.toUpperCase();const o=e.slice(0,t).toUpperCase(),s=e.slice(t);return o+s},isStandardRoom(e){return/^\d+[а-яё]+$/i.test(e)},isRoomWithSpace(e){return/^\d+[а-яё]?\s[а-яё]+$/i.test(e)},isSpecialRoom(e){const t=["129 1общ","бокс мтп","бокс пм","бокс тр","спортивный комплекс","учхоз"];return t.includes(e.toLowerCase())},formatTeacherForApi(e){if(!e)return"";const t=e.replace(/\./g,"").replace(/\s+/g," ").trim(),o=t.split(" ");let s=o[0];return o.length>1&&(s+=`_${o[1][0]}`),o.length>2&&(s+=`_${o[2][0]}`),s},formatTeacherForDisplay(e){if(!e)return"";const t=e.replace(/\./g,"").replace(/\s+/g," ").trim().split(" ");let o=t[0].charAt(0).toUpperCase()+t[0].slice(1).toLowerCase();return t.length>1&&(o+=`${t[1][0].toUpperCase()}.`),t.length>2&&(o+=`${t[2][0].toUpperCase()}.`),o},determineSearchType(e){return e=e.trim(),this.isSpecialRoom(e)||this.isRoomWithSpace(e)||this.isStandardRoom(e)?"room":/^[а-яё]+\d+$/i.test(e)?"group":"teacher"},validateInput(e){if(e=e.trim(),!e)return null;const t=this.determineSearchType(e);return"teacher"!==t||/^[а-яё\s\-\.]+$/i.test(e)?t:null},handleSearch(){const e=this.searchInput.trim();if(!e)return;const t=this.validateInput(e);if(!t)return this.errorMessage="Введите: группу (ПИ2303), преподавателя (Иванов) или аудиторию (405эк)",void setTimeout((()=>this.errorMessage=""),3e3);let o=e;if("group"===t){const t=e.search(/\d/);o=-1===t?e.toUpperCase():e.slice(0,t).toUpperCase()+e.slice(t)}else if("teacher"===t)return void this.searchSchedule({type:t,query:this.formatTeacherForApi(e),displayQuery:this.formatTeacherForDisplay(e)});this.errorMessage="",this.searchSchedule({type:t,query:e})}}};const G=(0,C.A)(X,[["render",U],["__scopeId","data-v-07d155a3"]]);var j=G;const Z={class:"table"},K={class:"table__title"};function Y(e,t,o,s,n,i){const l=(0,r.g2)("ScheduleTableContent"),c=(0,r.g2)("swiper-slide"),d=(0,r.g2)("swiper");return(0,r.uX)(),(0,r.CE)("section",null,[((0,r.uX)(),(0,r.Wv)(d,{class:"table-swiper","slides-per-view":1,"space-between":50,onSwiper:i.onSwiper,onSlideChange:i.onSlideChange,"initial-slide":i.initialSlide,key:i.swiperKey},{default:(0,r.k6)((()=>[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(e.days,((e,t)=>((0,r.uX)(),(0,r.Wv)(c,{key:t},{default:(0,r.k6)((()=>[(0,r.Lk)("section",Z,[(0,r.Lk)("h2",K,(0,a.v_)(e?.fullDayName||"")+" | "+(0,a.v_)(e?.date||"")+" "+(0,a.v_)(e?.month||""),1),(0,r.bF)(l,{"day-index":t},null,8,["day-index"])])])),_:2},1024)))),128))])),_:1},8,["onSwiper","onSlideChange","initial-slide"]))])}var z=o(2342);const Q={key:0,class:"table__content"},q={key:1,class:"no-data"};function J(e,t,o,s,a,n){const i=(0,r.g2)("ScheduleTableRow");return n.normalizedRows.length?((0,r.uX)(),(0,r.CE)("table",Q,[(0,r.Lk)("tbody",null,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(n.normalizedRows,((e,t)=>((0,r.uX)(),(0,r.Wv)(i,{key:t,row:e},null,8,["row"])))),128))])])):((0,r.uX)(),(0,r.CE)("div",q," Нет данных для отображения "))}o(7642),o(8004),o(3853),o(5876),o(2475),o(5024),o(1698);const ee=["data-theme"],te=["innerHTML"],oe={class:"table__content-row-lesson"},se={class:"table__content-row-lesson--class"},re=["innerHTML"],ae={class:"table__content-row-room"},ne=["innerHTML"],ie={class:"table__content-row-room-note-container"};function le(e,t,o,n,i,l){return(0,r.uX)(),(0,r.CE)("tr",{class:(0,a.C4)(["table__content-row",{"tg-theme":i.isTelegram}]),"data-theme":i.isDarkTheme?"dark":"light"},[(0,r.Lk)("td",{class:"table__content-row-time",innerHTML:o.row.time},null,8,te),(0,r.Lk)("td",{class:(0,a.C4)(["table__content-row-color",`table__content-row-color--${o.row.type}`])},null,2),(0,r.Lk)("td",oe,[(0,r.Lk)("span",se,(0,a.v_)(o.row.lesson),1),t[2]||(t[2]=(0,r.Lk)("br",null,null,-1)),(0,r.Lk)("span",{class:"table__content-row-lesson--details",innerHTML:l.displayMainDetails},null,8,re)]),(0,r.Lk)("td",ae,[(0,r.Lk)("span",{class:"table__content-row-room--num",innerHTML:l.displayRoomDetails},null,8,ne),(0,r.Lk)("div",ie,[l.hasNote&&l.isLessonExists?((0,r.uX)(),(0,r.CE)("svg",{key:0,onClick:t[0]||(t[0]=(0,s.D$)(((...e)=>l.handleNoteClick&&l.handleNoteClick(...e)),["stop"])),onTouchstart:t[1]||(t[1]=(0,s.D$)(((...e)=>l.handleNoteClick&&l.handleNoteClick(...e)),["stop"])),class:"table__content-row-room-note",width:"18",height:"18",viewBox:"0 0 15 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},t[3]||(t[3]=[(0,r.Lk)("path",{d:"M12.3333 8.33333V6.33333C12.3333 4.13333 12.3333 3.03333 11.65 2.35C10.9667 1.66667 9.86667 1.66667 7.66667 1.66667H5.66667C3.46667 1.66667 2.36667 1.66667 1.68333 2.35C1 3.03333 1 4.13333 1 6.33333V9.66667C1 11.8667 1 12.9667 1.68333 13.65C2.36667 14.3333 3.46667 14.3333 5.66667 14.3333H6.66667M10 1V2.33333M6.66667 1V2.33333M3.33333 1V2.33333M8.33333 13C8.33333 13 9 13 9.66667 14.3333C9.66667 14.3333 11.7847 11 13.6667 10.3333M4 9.66667H6.66667M4 6.33333H9.33333",stroke:"var(--app-primary-color)","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"},null,-1)]),32)):(0,r.Q3)("",!0)])])],10,ee)}o(2489),o(531),o(3579);var ce={name:"ScheduleTableRow",props:{row:{type:Object,required:!0}},data(){return{isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme())},computed:{...(0,d.L8)(["selectedDay","getNotes","searchType"]),isLessonExists(){return""!==this.row.lesson?.trim()},hasNote(){const e=this.selectedDay?.originalDate?.toISOString().split("T")[0]||(new Date).toISOString().split("T")[0];return this.getNotes.some((t=>t.lesson===this.row.lesson&&t.time===this.row.time&&t.date===e))},displayTeachers(){return this.row.teachers?.map((e=>e.name)).join(", ")||""},displayGroups(){if("teacher"===this.searchType){const e={};return this.row.details?.forEach((t=>{if(t.group){const o=t.group+(t.subgroup?`_${t.subgroup}`:"");e[o]=t.group+(t.subgroup?` (${t.subgroup})`:"")}})),Object.values(e).join(", ")}if("room"===this.searchType){const e=new Set;return this.row.details?.forEach((t=>{t.groups?.forEach((t=>{if(t.group){const o=t.group.split("(")[0];e.add(o)}}))})),[...e].join(", ")}return""},displayRooms(){return"group"===this.searchType?this.row.room||"":"teacher"===this.searchType&&this.row.room||""},displayMainDetails(){switch(this.searchType){case"group":return this.formatTeachersWithSubgroups(this.row.teachers);case"teacher":return this.formatGroupsWithSubgroups(this.row.details);case"room":return this.formatTeachersWithSubgroups(this.row.details);default:return""}},displayRoomDetails(){switch(this.searchType){case"group":return this.formatRoomsWithSubgroups(this.row.teachers);case"teacher":return this.row.room||"";case"room":return this.formatGroupsWithSubgroups(this.row.details?.flatMap((e=>e.groups||[])));default:return""}}},methods:{initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--app-bg-color",this.tgThemeParams.bg_color||(this.isDarkTheme?"#212529":"#ffffff")),document.documentElement.style.setProperty("--app-text-color",this.tgThemeParams.text_color||(this.isDarkTheme?"#ffffff":"#1E1E1E")),document.documentElement.style.setProperty("--app-secondary-bg",this.tgThemeParams.secondary_bg_color||(this.isDarkTheme?"#212529":"#f4f4f5")),document.documentElement.style.setProperty("--app-border-color",this.isDarkTheme?"#444":"#D9D9D9"),document.documentElement.style.setProperty("--app-primary-color",(this.isDarkTheme,"#3DB95E")),document.documentElement.style.setProperty("--app-hint-color",this.tgThemeParams.hint_color||(this.isDarkTheme?"#aaaaaa":"#707579"))},handleNoteClick(e){if(!this.isLessonExists)return e.preventDefault(),void e.stopPropagation();e.preventDefault(),e.stopPropagation();const t=this.selectedDay?.originalDate?.toISOString().split("T")[0]||(new Date).toISOString().split("T")[0],o=this.getNotes.find((e=>e.lesson===this.row.lesson&&e.time===this.row.time&&e.date===t));o&&this.$store.dispatch("openNoteDialog",o.id)},formatTeachersWithSubgroups(e){return e&&e.length?e.map((e=>{const t=e.name||e.teacher||"",o=e.subgroup||e.groups?.[0]?.subgroup||"";if(!t)return"";const s=t.split(" ");s[0],s[1]&&s[1][0],s[2]&&s[2][0];return o?`${t}(${o})`:t})).filter(Boolean).join("<br>"):""},formatGroupsWithSubgroups(e){if(!e)return"";if("room"===this.searchType){const t=new Set;return e.forEach((e=>{if(e.group){const o=e.group.split("(")[0];t.add(o)}})),[...t].join("<br>")}return e.map((e=>{let t=e.group;return e.subgroup&&(t+=`(${e.subgroup})`),t})).join("<br>")},formatRoomsWithSubgroups(e){if(!e)return"";const t=new Map,o=new Set;return e.forEach((e=>{e.subgroup&&o.add(e.subgroup)})),e.forEach((e=>{e.room&&(t.has(e.room)||t.set(e.room,new Set),e.subgroup&&t.get(e.room).add(e.subgroup))})),[...t.entries()].map((([e,t])=>t.size===o.size?e:`${e}(${[...t].join(",")})`)).join("<br>")}}};const de=(0,C.A)(ce,[["render",le],["__scopeId","data-v-31de33d4"]]);var me=de;const he=[{time:"08:00<br>09:30",type:"seminar"},{time:"09:45<br>11:15",type:"seminar"},{time:"11:30<br>13:00",type:"seminar"},{time:"13:50<br>15:20",type:"seminar"},{time:"15:35<br>17:05",type:"seminar"},{time:"17:20<br>18:50",type:"seminar"}],ue=[{time:"08:00<br>09:30",type:"seminar"},{time:"09:45<br>11:15",type:"seminar"},{time:"11:30<br>13:00",type:"seminar"},{time:"13:15<br>14:45",type:"seminar"},{time:"15:00<br>16:30",type:"seminar"},{time:"16:45<br>18:15",type:"seminar"}];var pe={name:"ScheduleTableContent",components:{ScheduleTableRow:me},props:{dayIndex:{type:Number,required:!0}},computed:{currentDaySchedule(){return this.$store.getters.currentWeekSchedule[this.dayIndex]||[]},timeSlots(){return 5===this.dayIndex?ue:he},normalizedRows(){return this.timeSlots.map((e=>{const t=this.currentDaySchedule.find((t=>t.time===e.time))||{};return{...e,type:t.type||e.type,lesson:t.lesson||"",teachers:t.teachers||[],room:t.room||"",details:t.details||[]}}))}},methods:{...(0,d.i0)(["updateAvailableLessons","updateFullWeekSchedule"]),getUniqueRoomsWithSubgroups(e){const t={},o=new Set;return e.forEach((e=>{e.subgroup&&o.add(e.subgroup)})),e.forEach((e=>{e.room&&(t[e.room]||(t[e.room]=new Set),e.subgroup&&t[e.room].add(e.subgroup))})),Object.entries(t).map((([e,t])=>t.size>0&&t.size!==o.size?`${e} (${Array.from(t).join(", ")})`:e)).join(", ")}},watch:{normalizedRows:{immediate:!0,handler(e){this.updateAvailableLessons(e)}}}};const ge=(0,C.A)(pe,[["render",J]]);var Ce=ge,Te={name:"ScheduleTable",components:{Swiper:z.RC,SwiperSlide:z.qr,ScheduleTableContent:Ce},data(){return{swiperInstance:null,localSelectedDayIndex:0}},computed:{...(0,d.L8)(["days","selectedDayIndex","monthNames","currentWeekType"]),initialSlide(){return this.localSelectedDayIndex},swiperKey(){return`${this.currentWeekType}`}},methods:{...(0,d.i0)(["setSelectedDay"]),onSwiper(e){this.swiperInstance=e,e.slideTo(this.localSelectedDayIndex)},onSlideChange(e){const t=e.activeIndex;this.localSelectedDayIndex=t,this.days[t]&&this.setSelectedDay({...this.days[t],dayIndex:t})}},watch:{days(){this.$nextTick((()=>{this.swiperInstance&&void 0!==this.localSelectedDayIndex&&this.swiperInstance.slideTo(this.localSelectedDayIndex)}))},selectedDayIndex(e){void 0!==e&&e!==this.localSelectedDayIndex&&(this.localSelectedDayIndex=e,this.swiperInstance&&this.swiperInstance.slideTo(e))},currentWeekType(){this.$nextTick((()=>{this.swiperInstance&&this.swiperInstance.update()}))}},created(){this.localSelectedDayIndex=this.selectedDayIndex||0}};const fe=(0,C.A)(Te,[["render",Y],["__scopeId","data-v-878bc67c"]]);var ke=fe;const ye={class:"btns"};function we(e,t,o,s,a,n){const i=(0,r.g2)("FullScheduleModal");return(0,r.uX)(),(0,r.CE)("section",ye,[(0,r.Lk)("button",{class:"btn btn__sked",onClick:t[0]||(t[0]=(...e)=>n.showFullSchedule&&n.showFullSchedule(...e))},t[3]||(t[3]=[(0,r.Fv)('Полное расписание <span><svg class="btn__full-sked" width="23" height="23" viewBox="0 0 23 23" fill="none" xmlns="http://www.w3.org/2000/svg"><g clip-path="url(#clip0_135_258)"><path d="M23 4.3125V20.125C23 20.8875 22.6971 21.6188 22.1579 22.1579C21.6188 22.6971 20.8875 23 20.125 23H2.875C2.1125 23 1.38124 22.6971 0.842068 22.1579C0.302901 21.6188 0 20.8875 0 20.125V2.875C0 2.1125 0.302901 1.38124 0.842068 0.842068C1.38124 0.302901 2.1125 0 2.875 0L20.125 0C20.8875 0 21.6188 0.302901 22.1579 0.842068C22.6971 1.38124 23 2.1125 23 2.875V4.3125ZM21.5625 4.3125V2.875C21.5625 2.49375 21.411 2.12812 21.1415 1.85853C20.8719 1.58895 20.5062 1.4375 20.125 1.4375H2.875C2.49375 1.4375 2.12812 1.58895 1.85853 1.85853C1.58895 2.12812 1.4375 2.49375 1.4375 2.875V4.3125H21.5625ZM21.5625 5.75H1.4375V20.125C1.4375 20.5062 1.58895 20.8719 1.85853 21.1415C2.12812 21.411 2.49375 21.5625 2.875 21.5625H20.125C20.5062 21.5625 20.8719 21.411 21.1415 21.1415C21.411 20.8719 21.5625 20.5062 21.5625 20.125V5.75ZM6.46875 8.625C6.65937 8.625 6.84219 8.70073 6.97698 8.83552C7.11177 8.97031 7.1875 9.15313 7.1875 9.34375C7.1875 9.53437 7.11177 9.71719 6.97698 9.85198C6.84219 9.98677 6.65937 10.0625 6.46875 10.0625H3.588C3.39738 10.0625 3.21456 9.98677 3.07977 9.85198C2.94498 9.71719 2.86925 9.53437 2.86925 9.34375C2.86925 9.15313 2.94498 8.97031 3.07977 8.83552C3.21456 8.70073 3.39738 8.625 3.588 8.625H6.46875ZM19.4062 8.625C19.5969 8.625 19.7797 8.70073 19.9145 8.83552C20.0493 8.97031 20.125 9.15313 20.125 9.34375C20.125 9.53437 20.0493 9.71719 19.9145 9.85198C19.7797 9.98677 19.5969 10.0625 19.4062 10.0625H10.7812C10.5906 10.0625 10.4078 9.98677 10.273 9.85198C10.1382 9.71719 10.0625 9.53437 10.0625 9.34375C10.0625 9.15313 10.1382 8.97031 10.273 8.83552C10.4078 8.70073 10.5906 8.625 10.7812 8.625H19.4062ZM6.46875 12.9375C6.65937 12.9375 6.84219 13.0132 6.97698 13.148C7.11177 13.2828 7.1875 13.4656 7.1875 13.6562C7.1875 13.8469 7.11177 14.0297 6.97698 14.1645C6.84219 14.2993 6.65937 14.375 6.46875 14.375H3.588C3.39738 14.375 3.21456 14.2993 3.07977 14.1645C2.94498 14.0297 2.86925 13.8469 2.86925 13.6562C2.86925 13.4656 2.94498 13.2828 3.07977 13.148C3.21456 13.0132 3.39738 12.9375 3.588 12.9375H6.46875ZM19.4062 12.9375C19.5969 12.9375 19.7797 13.0132 19.9145 13.148C20.0493 13.2828 20.125 13.4656 20.125 13.6562C20.125 13.8469 20.0493 14.0297 19.9145 14.1645C19.7797 14.2993 19.5969 14.375 19.4062 14.375H10.7812C10.5906 14.375 10.4078 14.2993 10.273 14.1645C10.1382 14.0297 10.0625 13.8469 10.0625 13.6562C10.0625 13.4656 10.1382 13.2828 10.273 13.148C10.4078 13.0132 10.5906 12.9375 10.7812 12.9375H19.4062ZM6.46875 17.25C6.65937 17.25 6.84219 17.3257 6.97698 17.4605C7.11177 17.5953 7.1875 17.7781 7.1875 17.9688C7.1875 18.1594 7.11177 18.3422 6.97698 18.477C6.84219 18.6118 6.65937 18.6875 6.46875 18.6875H3.588C3.39738 18.6875 3.21456 18.6118 3.07977 18.477C2.94498 18.3422 2.86925 18.1594 2.86925 17.9688C2.86925 17.7781 2.94498 17.5953 3.07977 17.4605C3.21456 17.3257 3.39738 17.25 3.588 17.25H6.46875ZM19.4062 17.25C19.5969 17.25 19.7797 17.3257 19.9145 17.4605C20.0493 17.5953 20.125 17.7781 20.125 17.9688C20.125 18.1594 20.0493 18.3422 19.9145 18.477C19.7797 18.6118 19.5969 18.6875 19.4062 18.6875H10.7812C10.5906 18.6875 10.4078 18.6118 10.273 18.477C10.1382 18.3422 10.0625 18.1594 10.0625 17.9688C10.0625 17.7781 10.1382 17.5953 10.273 17.4605C10.4078 17.3257 10.5906 17.25 10.7812 17.25H19.4062Z" fill="white"></path></g><defs><clipPath id="clip0_135_258"><rect width="23" height="23" fill="white"></rect></clipPath></defs></svg></span>',2)])),(0,r.Lk)("button",{class:"btn btn__sked",onClick:t[1]||(t[1]=(...t)=>e.openAddNoteModal&&e.openAddNoteModal(...t))},t[4]||(t[4]=[(0,r.eW)("Добавить заметку "),(0,r.Lk)("span",null,[(0,r.Lk)("svg",{class:"btn__note",width:"23",height:"25",viewBox:"0 0 23 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M19.7895 13.65V10.2C19.7895 6.405 19.7895 4.5075 18.6566 3.32875C17.5237 2.15 15.7 2.15 12.0526 2.15H8.73684C5.08947 2.15 3.26579 2.15 2.13289 3.32875C1 4.5075 1 6.405 1 10.2V15.95C1 19.745 1 21.6425 2.13289 22.8212C3.26579 24 5.08947 24 8.73684 24H10.3947M15.9211 1V3.3M10.3947 1V3.3M4.86842 1V3.3M13.1579 21.7C13.1579 21.7 14.2632 21.7 15.3684 24C15.3684 24 18.8798 18.25 22 17.1M5.97368 15.95H10.3947M5.97368 10.2H14.8158",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})])],-1)])),a.showModal?((0,r.uX)(),(0,r.Wv)(i,{key:0,onClose:t[2]||(t[2]=e=>a.showModal=!1)})):(0,r.Q3)("",!0)])}const be={class:"modal-content"},_e={class:"modal-header"},Ee={class:"table__title"},De={width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg"},ve=["stroke"],Se={class:"modal-body"},Ne={key:0,class:"loading"},Le={key:1,class:"week-schedule"},We={class:"table__title"},Me={class:"table__content"},Pe=["innerHTML"],Ae={class:"table__content-row-lesson"},xe={class:"table__content-row-lesson--class"},Ie=["innerHTML"],He={class:"table__content-row-room"},Oe=["innerHTML"];function Re(e,t,o,n,i,l){return(0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["full-schedule-modal",{"tg-theme":i.isTelegram,"tg-dark":i.isDarkTheme}]),onClick:t[1]||(t[1]=(0,s.D$)(((...e)=>l.closeModal&&l.closeModal(...e)),["self"]))},[(0,r.Lk)("div",be,[(0,r.Lk)("div",_e,[(0,r.Lk)("h2",Ee,"Расписание на неделю (Неделя "+(0,a.v_)(e.currentWeekNumber)+")",1),(0,r.Lk)("button",{class:"close-btn",onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e))},[((0,r.uX)(),(0,r.CE)("svg",De,[(0,r.Lk)("path",{d:"M18 6L6 18M6 6L18 18",stroke:i.isTelegram?"var(--tg-button-text-color)":"#FFFFFF","stroke-width":"2","stroke-linecap":"round","stroke-linejoin":"round"},null,8,ve)]))])]),(0,r.Lk)("div",Se,[i.isLoading?((0,r.uX)(),(0,r.CE)("div",Ne,"Загрузка...")):((0,r.uX)(),(0,r.CE)("div",Le,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(i.weekDays,((e,t)=>((0,r.uX)(),(0,r.CE)("div",{key:t,class:"table"},[(0,r.Lk)("h3",We,(0,a.v_)(e.fullName),1),(0,r.Lk)("div",Me,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.getTimeSlotsForDay(t),((e,o)=>((0,r.uX)(),(0,r.CE)("div",{key:o,class:"table__content-row"},[(0,r.Lk)("div",{class:"table__content-row-time",innerHTML:e.time},null,8,Pe),(0,r.Lk)("div",{class:(0,a.C4)(["table__content-row-color",`table__content-row-color--${l.getTypeForLesson(t,e.time)}`])},null,2),(0,r.Lk)("div",Ae,[(0,r.Lk)("span",xe,(0,a.v_)(l.getLessonName(t,e.time)),1),(0,r.Lk)("span",{class:(0,a.C4)(["table__content-row-lesson--details","green-text"]),innerHTML:l.getMainDetails(t,e.time)},null,8,Ie)]),(0,r.Lk)("div",He,[(0,r.Lk)("span",{class:(0,a.C4)(["table__content-row-room--num"]),innerHTML:l.getRoomDetails(t,e.time)},null,8,Oe)])])))),128))])])))),128))]))])])],2)}o(4114);const Be=[{time:"08:00<br>09:30",type:"seminar"},{time:"09:45<br>11:15",type:"seminar"},{time:"11:30<br>13:00",type:"seminar"},{time:"13:50<br>15:20",type:"seminar"},{time:"15:35<br>17:05",type:"seminar"},{time:"17:20<br>18:50",type:"seminar"}],Fe=[{time:"08:00<br>09:30",type:"seminar"},{time:"09:45<br>11:15",type:"seminar"},{time:"11:30<br>13:00",type:"seminar"},{time:"13:15<br>14:45",type:"seminar"},{time:"15:00<br>16:30",type:"seminar"},{time:"16:45<br>18:15",type:"seminar"}];var Ve={name:"FullScheduleModal",data(){return{weekDays:[{shortName:"Пн",fullName:"Понедельник"},{shortName:"Вт",fullName:"Вторник"},{shortName:"Ср",fullName:"Среда"},{shortName:"Чт",fullName:"Четверг"},{shortName:"Пт",fullName:"Пятница"},{shortName:"Сб",fullName:"Суббота"}],isLoading:!1,isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},computed:{...(0,d.L8)(["currentWeekSchedule","currentWeekNumber","searchType"])},methods:{...(0,d.i0)(["fetchFullWeekSchedule"]),initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||"#ffffff"),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||"#000000"),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||"#707579"),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||"#f4f4f5")},closeModal(){this.$emit("close")},getTimeSlotsForDay(e){return 5===e?Fe:Be},getLessonsForDay(e){return this.currentWeekSchedule[e]||[]},getLessonForDay(e,t){const o=this.getLessonsForDay(e);return o.find((e=>e.time===t))||null},getLessonName(e,t){const o=this.getLessonForDay(e,t);return o?.name||o?.lesson||""},getTypeForLesson(e,t){const o=this.getLessonForDay(e,t);return o?.type||"seminar"},getMainDetails(e,t){const o=this.getLessonForDay(e,t);if(!o)return"";switch(this.searchType){case"group":return this.formatTeachersWithSubgroups(o.teachers||[]);case"teacher":return this.formatGroupsWithSubgroups(o.details||[]);case"room":return this.formatTeachersWithSubgroups(o.details||[]);default:return""}},getRoomDetails(e,t){const o=this.getLessonForDay(e,t);if(!o)return"";switch(this.searchType){case"group":return this.formatRoomsWithSubgroups(o.teachers||[]);case"teacher":return o.room||"";case"room":return this.formatGroupsWithSubgroups(o.details?.flatMap((e=>e.groups||[]))||[]);default:return""}},formatTeachersWithSubgroups(e){if(!e||!e.length)return"";const t=new Map;e.forEach((e=>{const o=e.name||e.teacher||"";if(!o)return;const s=e.subgroup||e.groups?.[0]?.subgroup||"";t.has(o)||t.set(o,new Set),s&&t.get(o).add(s)}));const o=[];return t.forEach(((e,t)=>{const s=t.split(" "),r=s[0]+" "+(s[1]?s[1][0]+".":"")+(s[2]?s[2][0]+".":"");e.size>0?o.push(`${r}(${[...e].join(",")})`):o.push(r)})),o.join("<br>")},formatGroupsWithSubgroups(e){if(!e)return"";if("room"===this.searchType){const t=new Set;return e.forEach((e=>{if(e.group){const o=e.group.split("(")[0];t.add(o)}})),[...t].join("<br>")}return e.map((e=>{let t=e.group;return e.subgroup&&(t+=`(${e.subgroup})`),t})).join("<br>")},formatRoomsWithSubgroups(e){if(!e)return"";const t=new Map;e.forEach((e=>{e.room&&(t.has(e.room)||t.set(e.room,new Set),e.subgroup&&t.get(e.room).add(e.subgroup))}));const o=[];return t.forEach(((e,t)=>{e.size>0?o.push(`${t}(${[...e].join(",")})`):o.push(t)})),o.join("<br>")}},async created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme()),this.isLoading=!0;try{await this.fetchFullWeekSchedule()}catch(e){console.error("Ошибка загрузки расписания:",e)}finally{this.isLoading=!1}}};const $e=(0,C.A)(Ve,[["render",Re],["__scopeId","data-v-7d61e25f"]]);var Ue=$e,Xe={name:"Buttons",components:{FullScheduleModal:Ue},data(){return{showModal:!1}},methods:{...(0,d.i0)(["openAddNoteModal","fetchFullWeekSchedule"]),async showFullSchedule(){try{await this.fetchFullWeekSchedule(),this.showModal=!0}catch(e){console.error("Ошибка загрузки расписания:",e)}}}};const Ge=(0,C.A)(Xe,[["render",we]]);var je=Ge,Ze={name:"sked",components:{Header:f,Buttons:je,ScheduleTable:ke,Search:j,GroupInfo:B,Slider:N},mounted(){this.$store.dispatch("updateDays")}};const Ke=(0,C.A)(Ze,[["render",m]]);var Ye=Ke;const ze=["data-theme"],Qe={key:0,class:"notes-list"},qe=["data-note-id"],Je={class:"note-header"},et={class:"note-meta"},tt={class:"note-date"},ot={class:"note-time"},st={class:"note-actions"},rt=["onClick"],at=["onClick"],nt={class:"note-content-wrapper"},it={class:"note-lesson"},lt={class:"note-details"},ct={class:"note-teacher"},dt={class:"note-room"},mt={key:0,class:"note-edit"},ht={class:"note-edit-actions"},ut={key:1,class:"note-content"},pt={key:1,class:"notes-empty"};function gt(e,t,o,n,i,l){const c=(0,r.g2)("Header");return(0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["notes",{"tg-theme":i.isTelegram}]),"data-theme":i.isDarkTheme?"dark":"light"},[(0,r.bF)(c,{title:"Заметки"}),l.notes.length>0?((0,r.uX)(),(0,r.CE)("div",Qe,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.sortedNotes,(o=>((0,r.uX)(),(0,r.CE)("div",{key:o.id,class:(0,a.C4)(["note-item",{"note-item--active":o.id===e.activeNoteId}]),"data-note-id":o.id},[(0,r.Lk)("div",Je,[(0,r.Lk)("div",et,[(0,r.Lk)("span",tt,(0,a.v_)(l.formatDate(o.date)),1),(0,r.Lk)("span",ot,(0,a.v_)(o.time),1)]),(0,r.Lk)("div",st,[(0,r.Lk)("button",{onClick:e=>l.startEditing(o),class:"note-edit-btn"},t[3]||(t[3]=[(0,r.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M8 13.3333H14M11 2.33333L13.6667 5L5.66667 13H3V10.3333L11 2.33333Z",stroke:"#3DB95E","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),8,rt),(0,r.Lk)("button",{onClick:t=>e.deleteNote(o.id),class:"note-delete-btn"},t[4]||(t[4]=[(0,r.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M4 12L12 4M4 4L12 12",stroke:"#FF3B30","stroke-width":"1.5","stroke-linecap":"round"})],-1)]),8,at)])]),(0,r.Lk)("div",nt,[(0,r.Lk)("h3",it,(0,a.v_)(o.lesson),1),(0,r.Lk)("div",lt,[(0,r.Lk)("span",ct,(0,a.v_)(o.teacher),1),(0,r.Lk)("span",dt,(0,a.v_)(o.room),1)]),i.editingNote&&i.editingNote.id===o.id?((0,r.uX)(),(0,r.CE)("div",mt,[(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>i.editingNote.content=e),class:"note-edit-textarea",placeholder:"Введите текст заметки...",ref_for:!0,ref:"textarea"},null,512),[[s.Jo,i.editingNote.content]]),(0,r.Lk)("div",ht,[(0,r.Lk)("button",{onClick:t[1]||(t[1]=(...e)=>l.cancelEditing&&l.cancelEditing(...e)),class:"note-edit-cancel"},"Отмена"),(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.saveNote&&l.saveNote(...e)),class:"note-edit-save"},"Сохранить")])])):((0,r.uX)(),(0,r.CE)("div",ut,(0,a.v_)(o.content||"Нет текста заметки"),1))])],10,qe)))),128))])):((0,r.uX)(),(0,r.CE)("div",pt," У вас пока нет заметок "))],10,ze)}var Ct={name:"Notes",components:{Header:f},data(){return{editingNote:null,highlightTimeout:null,isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme(),this.setupTelegramBackButton(),window.Telegram.WebApp.expand())},computed:{...(0,d.L8)(["getNotes","activeNoteId"]),notes(){return this.getNotes.map((e=>({...e,time:e.time.replace("<br>"," - ")})))},sortedNotes(){return[...this.notes].sort(((e,t)=>{const o=new Date(e.date),s=new Date(t.date);return s-o||e.time.localeCompare(t.time)}))}},methods:{...(0,d.i0)(["updateNote","deleteNote"]),initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||(this.isDarkTheme?"#18222d":"#ffffff")),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||(this.isDarkTheme?"#ffffff":"#000000")),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||(this.isDarkTheme?"#aaaaaa":"#707579")),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||(this.isDarkTheme?"#212529":"#f4f4f5"))},setupTelegramBackButton(){const e=window.Telegram.WebApp;e.BackButton.show(),e.BackButton.onClick((()=>{e.close()}))},formatDate(e){const t=new Date(e),o=["Вс","Пн","Вт","Ср","Чт","Пт","Сб"],s=o[t.getDay()],r=t.toLocaleDateString("ru-RU",{day:"numeric",month:"long",year:"numeric"});return`${s}, ${r}`},startEditing(e){this.editingNote={...e},this.$nextTick((()=>{const t=this.$el.querySelector(`[data-note-id="${e.id}"] textarea`);t&&t.focus()}))},cancelEditing(){this.editingNote=null},async saveNote(){this.editingNote&&(this.editingNote.content&&"Нет текста заметки"===this.editingNote.content.trim()&&(this.editingNote.content="Ну и зачем ты это пишешь ;(|"),await this.updateNote(this.editingNote),this.editingNote=null)},clearHighlightTimer(){this.highlightTimeout&&(clearTimeout(this.highlightTimeout),this.highlightTimeout=null)}},beforeUnmount(){this.clearHighlightTimer()}};const Tt=(0,C.A)(Ct,[["render",gt],["__scopeId","data-v-078f4f13"]]);var ft=Tt;const kt={class:"footer"};function yt(e,t,o,s,n,i){return(0,r.uX)(),(0,r.CE)("footer",kt,[(0,r.Lk)("div",{class:(0,a.C4)(["footer__sked",{"active-tab":"schedule"===e.activeTab}]),onClick:t[0]||(t[0]=e=>i.switchTab("schedule"))},t[2]||(t[2]=[(0,r.Fv)('<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" data-v-fd46248e><g clip-path="url(#clip0_192_5)" data-v-fd46248e><path d="M24 5.3125V21.125C24 21.8875 23.6971 22.6188 23.1579 23.1579C22.6188 23.6971 21.8875 24 21.125 24H3.875C3.1125 24 2.38124 23.6971 1.84207 23.1579C1.3029 22.6188 1 21.8875 1 21.125V3.875C1 3.1125 1.3029 2.38124 1.84207 1.84207C2.38124 1.3029 3.1125 1 3.875 1L21.125 1C21.8875 1 22.6188 1.3029 23.1579 1.84207C23.6971 2.38124 24 3.1125 24 3.875V5.3125ZM22.5625 5.3125V3.875C22.5625 3.49375 22.411 3.12812 22.1415 2.85853C21.8719 2.58895 21.5062 2.4375 21.125 2.4375H3.875C3.49375 2.4375 3.12812 2.58895 2.85853 2.85853C2.58895 3.12812 2.4375 3.49375 2.4375 3.875V5.3125H22.5625ZM22.5625 6.75H2.4375V21.125C2.4375 21.5062 2.58895 21.8719 2.85853 22.1415C3.12812 22.411 3.49375 22.5625 3.875 22.5625H21.125C21.5062 22.5625 21.8719 22.411 22.1415 22.1415C22.411 21.8719 22.5625 21.5062 22.5625 21.125V6.75ZM7.46875 9.625C7.65937 9.625 7.84219 9.70073 7.97698 9.83552C8.11177 9.97031 8.1875 10.1531 8.1875 10.3438C8.1875 10.5344 8.11177 10.7172 7.97698 10.852C7.84219 10.9868 7.65937 11.0625 7.46875 11.0625H4.588C4.39738 11.0625 4.21456 10.9868 4.07977 10.852C3.94498 10.7172 3.86925 10.5344 3.86925 10.3438C3.86925 10.1531 3.94498 9.97031 4.07977 9.83552C4.21456 9.70073 4.39738 9.625 4.588 9.625H7.46875ZM20.4062 9.625C20.5969 9.625 20.7797 9.70073 20.9145 9.83552C21.0493 9.97031 21.125 10.1531 21.125 10.3438C21.125 10.5344 21.0493 10.7172 20.9145 10.852C20.7797 10.9868 20.5969 11.0625 20.4062 11.0625H11.7812C11.5906 11.0625 11.4078 10.9868 11.273 10.852C11.1382 10.7172 11.0625 10.5344 11.0625 10.3438C11.0625 10.1531 11.1382 9.97031 11.273 9.83552C11.4078 9.70073 11.5906 9.625 11.7812 9.625H20.4062ZM7.46875 13.9375C7.65937 13.9375 7.84219 14.0132 7.97698 14.148C8.11177 14.2828 8.1875 14.4656 8.1875 14.6562C8.1875 14.8469 8.11177 15.0297 7.97698 15.1645C7.84219 15.2993 7.65937 15.375 7.46875 15.375H4.588C4.39738 15.375 4.21456 15.2993 4.07977 15.1645C3.94498 15.0297 3.86925 14.8469 3.86925 14.6562C3.86925 14.4656 3.94498 14.2828 4.07977 14.148C4.21456 14.0132 4.39738 13.9375 4.588 13.9375H7.46875ZM20.4062 13.9375C20.5969 13.9375 20.7797 14.0132 20.9145 14.148C21.0493 14.2828 21.125 14.4656 21.125 14.6562C21.125 14.8469 21.0493 15.0297 20.9145 15.1645C20.7797 15.2993 20.5969 15.375 20.4062 15.375H11.7812C11.5906 15.375 11.4078 15.2993 11.273 15.1645C11.1382 15.0297 11.0625 14.8469 11.0625 14.6562C11.0625 14.4656 11.1382 14.2828 11.273 14.148C11.4078 14.0132 11.5906 13.9375 11.7812 13.9375H20.4062ZM7.46875 18.25C7.65937 18.25 7.84219 18.3257 7.97698 18.4605C8.11177 18.5953 8.1875 18.7781 8.1875 18.9688C8.1875 19.1594 8.11177 19.3422 7.97698 19.477C7.84219 19.6118 7.65937 19.6875 7.46875 19.6875H4.588C4.39738 19.6875 4.21456 19.6118 4.07977 19.477C3.94498 19.3422 3.86925 19.1594 3.86925 18.9688C3.86925 18.7781 3.94498 18.5953 4.07977 18.4605C4.21456 18.3257 4.39738 18.25 4.588 18.25H7.46875ZM20.4062 18.25C20.5969 18.25 20.7797 18.3257 20.9145 18.4605C21.0493 18.5953 21.125 18.7781 21.125 18.9688C21.125 19.1594 21.0493 19.3422 20.9145 19.477C20.7797 19.6118 20.5969 19.6875 20.4062 19.6875H11.7812C11.5906 19.6875 11.4078 19.6118 11.273 19.477C11.1382 19.3422 11.0625 19.1594 11.0625 18.9688C11.0625 18.7781 11.1382 18.5953 11.273 18.4605C11.4078 18.3257 11.5906 18.25 11.7812 18.25H20.4062Z" fill="#33984E" data-v-fd46248e></path></g><g clip-path="url(#clip1_192_5)" data-v-fd46248e><path d="M23 4.3125V20.125C23 20.8875 22.6971 21.6188 22.1579 22.1579C21.6188 22.6971 20.8875 23 20.125 23H2.875C2.1125 23 1.38124 22.6971 0.842068 22.1579C0.302901 21.6188 0 20.8875 0 20.125V2.875C0 2.1125 0.302901 1.38124 0.842068 0.842068C1.38124 0.302901 2.1125 0 2.875 0L20.125 0C20.8875 0 21.6188 0.302901 22.1579 0.842068C22.6971 1.38124 23 2.1125 23 2.875V4.3125ZM21.5625 4.3125V2.875C21.5625 2.49375 21.411 2.12812 21.1415 1.85853C20.8719 1.58895 20.5062 1.4375 20.125 1.4375H2.875C2.49375 1.4375 2.12812 1.58895 1.85853 1.85853C1.58895 2.12812 1.4375 2.49375 1.4375 2.875V4.3125H21.5625ZM21.5625 5.75H1.4375V20.125C1.4375 20.5062 1.58895 20.8719 1.85853 21.1415C2.12812 21.411 2.49375 21.5625 2.875 21.5625H20.125C20.5062 21.5625 20.8719 21.411 21.1415 21.1415C21.411 20.8719 21.5625 20.5062 21.5625 20.125V5.75ZM6.46875 8.625C6.65937 8.625 6.84219 8.70073 6.97698 8.83552C7.11177 8.97031 7.1875 9.15313 7.1875 9.34375C7.1875 9.53437 7.11177 9.71719 6.97698 9.85198C6.84219 9.98677 6.65937 10.0625 6.46875 10.0625H3.588C3.39738 10.0625 3.21456 9.98677 3.07977 9.85198C2.94498 9.71719 2.86925 9.53437 2.86925 9.34375C2.86925 9.15313 2.94498 8.97031 3.07977 8.83552C3.21456 8.70073 3.39738 8.625 3.588 8.625H6.46875ZM19.4062 8.625C19.5969 8.625 19.7797 8.70073 19.9145 8.83552C20.0493 8.97031 20.125 9.15313 20.125 9.34375C20.125 9.53437 20.0493 9.71719 19.9145 9.85198C19.7797 9.98677 19.5969 10.0625 19.4062 10.0625H10.7812C10.5906 10.0625 10.4078 9.98677 10.273 9.85198C10.1382 9.71719 10.0625 9.53437 10.0625 9.34375C10.0625 9.15313 10.1382 8.97031 10.273 8.83552C10.4078 8.70073 10.5906 8.625 10.7812 8.625H19.4062ZM6.46875 12.9375C6.65937 12.9375 6.84219 13.0132 6.97698 13.148C7.11177 13.2828 7.1875 13.4656 7.1875 13.6562C7.1875 13.8469 7.11177 14.0297 6.97698 14.1645C6.84219 14.2993 6.65937 14.375 6.46875 14.375H3.588C3.39738 14.375 3.21456 14.2993 3.07977 14.1645C2.94498 14.0297 2.86925 13.8469 2.86925 13.6562C2.86925 13.4656 2.94498 13.2828 3.07977 13.148C3.21456 13.0132 3.39738 12.9375 3.588 12.9375H6.46875ZM19.4062 12.9375C19.5969 12.9375 19.7797 13.0132 19.9145 13.148C20.0493 13.2828 20.125 13.4656 20.125 13.6562C20.125 13.8469 20.0493 14.0297 19.9145 14.1645C19.7797 14.2993 19.5969 14.375 19.4062 14.375H10.7812C10.5906 14.375 10.4078 14.2993 10.273 14.1645C10.1382 14.0297 10.0625 13.8469 10.0625 13.6562C10.0625 13.4656 10.1382 13.2828 10.273 13.148C10.4078 13.0132 10.5906 12.9375 10.7812 12.9375H19.4062ZM6.46875 17.25C6.65937 17.25 6.84219 17.3257 6.97698 17.4605C7.11177 17.5953 7.1875 17.7781 7.1875 17.9688C7.1875 18.1594 7.11177 18.3422 6.97698 18.477C6.84219 18.6118 6.65937 18.6875 6.46875 18.6875H3.588C3.39738 18.6875 3.21456 18.6118 3.07977 18.477C2.94498 18.3422 2.86925 18.1594 2.86925 17.9688C2.86925 17.7781 2.94498 17.5953 3.07977 17.4605C3.21456 17.3257 3.39738 17.25 3.588 17.25H6.46875ZM19.4062 17.25C19.5969 17.25 19.7797 17.3257 19.9145 17.4605C20.0493 17.5953 20.125 17.7781 20.125 17.9688C20.125 18.1594 20.0493 18.3422 19.9145 18.477C19.7797 18.6118 19.5969 18.6875 19.4062 18.6875H10.7812C10.5906 18.6875 10.4078 18.6118 10.273 18.477C10.1382 18.3422 10.0625 18.1594 10.0625 17.9688C10.0625 17.7781 10.1382 17.5953 10.273 17.4605C10.4078 17.3257 10.5906 17.25 10.7812 17.25H19.4062Z" fill="white" data-v-fd46248e></path></g><defs data-v-fd46248e><clipPath id="clip0_192_5" data-v-fd46248e><rect width="23" height="23" fill="white" transform="translate(1 1)" data-v-fd46248e></rect></clipPath><clipPath id="clip1_192_5" data-v-fd46248e><rect width="23" height="23" fill="white" data-v-fd46248e></rect></clipPath></defs></svg>',1)]),2),(0,r.Lk)("div",{class:(0,a.C4)(["footer__note",{"active-tab":"notes"===e.activeTab}]),onClick:t[1]||(t[1]=e=>i.switchTab("notes"))},t[3]||(t[3]=[(0,r.Lk)("svg",{width:"24",height:"26",viewBox:"0 0 24 26",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M20.7895 14.65V11.2C20.7895 7.405 20.7895 5.5075 19.6566 4.32875C18.5237 3.15 16.7 3.15 13.0526 3.15H9.73684C6.08947 3.15 4.26579 3.15 3.13289 4.32875C2 5.5075 2 7.405 2 11.2V16.95C2 20.745 2 22.6425 3.13289 23.8212C4.26579 25 6.08947 25 9.73684 25H11.3947M16.9211 2V4.3M11.3947 2V4.3M5.86842 2V4.3M14.1579 22.7C14.1579 22.7 15.2632 22.7 16.3684 25C16.3684 25 19.8798 19.25 23 18.1M6.97368 16.95H11.3947M6.97368 11.2H15.8158",stroke:"#33984E","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"}),(0,r.Lk)("path",{d:"M19.7895 13.65V10.2C19.7895 6.405 19.7895 4.5075 18.6566 3.32875C17.5237 2.15 15.7 2.15 12.0526 2.15H8.73684C5.08947 2.15 3.26579 2.15 2.13289 3.32875C1 4.5075 1 6.405 1 10.2V15.95C1 19.745 1 21.6425 2.13289 22.8212C3.26579 24 5.08947 24 8.73684 24H10.3947M15.9211 1V3.3M10.3947 1V3.3M4.86842 1V3.3M13.1579 21.7C13.1579 21.7 14.2632 21.7 15.3684 24C15.3684 24 18.8798 18.25 22 17.1M5.97368 15.95H10.3947M5.97368 10.2H14.8158",stroke:"white","stroke-width":"1.5","stroke-linecap":"round","stroke-linejoin":"round"})],-1)]),2),t[4]||(t[4]=(0,r.Lk)("div",{class:"footer__double"},[(0,r.Lk)("svg",{width:"25",height:"25",viewBox:"0 0 25 25",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M8 20V23C8 23.5523 8.44772 24 9 24H23C23.5523 24 24 23.5523 24 23V9C24 8.44772 23.5523 8 23 8H18H2M24 12H18M14 1V4M6 1V4M5 12H7M9 12H15M5 16H7M9 16H15M3 4H17C17.5523 4 18 4.44772 18 5V19C18 19.5523 17.5523 20 17 20H3C2.44772 20 2 19.5523 2 19V5C2 4.44772 2.44772 4 3 4Z",stroke:"#33984E","stroke-width":"1.5"}),(0,r.Lk)("path",{d:"M7 19V22C7 22.5523 7.44772 23 8 23H22C22.5523 23 23 22.5523 23 22V8C23 7.44772 22.5523 7 22 7H17H1M23 11H17M13 0V3M5 0V3M4 11H6M8 11H14M4 15H6M8 15H14M2 3H16C16.5523 3 17 3.44772 17 4V18C17 18.5523 16.5523 19 16 19H2C1.44772 19 1 18.5523 1 18V4C1 3.44772 1.44772 3 2 3Z",stroke:"white","stroke-width":"1.5"})])],-1))])}var wt={name:"Footer",computed:{...(0,d.L8)(["activeTab"])},methods:{...(0,d.i0)(["setActiveTab"]),switchTab(e){this.setActiveTab(e)}}};const bt=(0,C.A)(wt,[["render",yt],["__scopeId","data-v-fd46248e"]]);var _t=bt;const Et=["data-theme"],Dt={class:"modal"},vt={class:"modal-header"},St={class:"modal-content"},Nt=["onClick"],Lt=["innerHTML"],Wt={class:"lesson-title"},Mt={class:"lesson-teacher"},Pt={key:0,class:"lesson-has-note"},At={key:0,class:"no-lessons"};function xt(e,t,o,n,i,l){return(0,r.uX)(),(0,r.Wv)(s.eB,{name:"fade"},{default:(0,r.k6)((()=>[l.isOpen?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,a.C4)([{"tg-theme":i.isTelegram},"modal-overlay"]),"data-theme":i.isDarkTheme?"dark":"light",onClick:t[1]||(t[1]=(0,s.D$)(((...e)=>l.closeModal&&l.closeModal(...e)),["self"]))},[(0,r.Lk)("div",Dt,[(0,r.Lk)("div",vt,[t[2]||(t[2]=(0,r.Lk)("h3",null,"Выберите пару для заметки",-1)),(0,r.Lk)("button",{onClick:t[0]||(t[0]=(...e)=>l.closeModal&&l.closeModal(...e)),class:"close-btn"},"×")]),(0,r.Lk)("div",St,[((0,r.uX)(!0),(0,r.CE)(r.FK,null,(0,r.pI)(l.todaysLessons,(e=>((0,r.uX)(),(0,r.CE)("div",{key:e.time,class:(0,a.C4)(["lesson-item",{"lesson-item--has-note":l.hasNoteForLesson(e)}]),onClick:t=>!l.hasNoteForLesson(e)&&l.handleAddNote(e)},[(0,r.Lk)("div",{class:"lesson-time",innerHTML:e.time},null,8,Lt),(0,r.Lk)("div",Wt,(0,a.v_)(e.lesson),1),(0,r.Lk)("div",Mt,(0,a.v_)(e.teacher),1),l.hasNoteForLesson(e)?((0,r.uX)(),(0,r.CE)("div",Pt," Заметка уже добавлена ")):(0,r.Q3)("",!0)],10,Nt)))),128)),0===l.todaysLessons.length?((0,r.uX)(),(0,r.CE)("p",At," Нет доступных пар для добавления заметки ")):(0,r.Q3)("",!0)])])],10,Et)):(0,r.Q3)("",!0)])),_:1})}var It={name:"AddNoteModal",data(){return{isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},computed:{...(0,d.L8)(["isAddNoteModalOpen","availableLessons","getNotes","selectedDay","currentWeekSchedule","selectedDayIndex"]),isOpen(){return this.isAddNoteModalOpen},selectedDate(){return this.selectedDay?.originalDate?.toISOString().split("T")[0]||(new Date).toISOString().split("T")[0]},todaysLessons(){return this.currentWeekSchedule[this.selectedDayIndex]||[]}},methods:{...(0,d.i0)(["closeAddNoteModal","addNote"]),initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||(this.isDarkTheme?"#18222d":"#ffffff")),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||(this.isDarkTheme?"#ffffff":"#000000")),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||(this.isDarkTheme?"#aaaaaa":"#707579")),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||(this.isDarkTheme?"#212529":"#f4f4f5"))},setupTelegramBackButton(){const e=window.Telegram.WebApp;e.BackButton.show(),e.BackButton.onClick((()=>{e.close()}))},closeModal(){this.closeAddNoteModal()},hasNoteForLesson(e){return this.getNotes.some((t=>t.date===this.selectedDate&&t.lesson===e.lesson&&t.time===e.time))},handleAddNote(e){const t={id:Date.now(),lesson:e.lesson,time:e.time,teacher:e.teacher,room:e.room,content:"",date:this.selectedDate};this.addNote(t),this.closeModal()}}};const Ht=(0,C.A)(It,[["render",xt],["__scopeId","data-v-505e1ee9"]]);var Ot=Ht;const Rt=["data-theme"],Bt={class:"note-dialog"},Ft={class:"dialog-meta"},Vt={class:"dialog-lesson"},$t={class:"dialog-time"},Ut={class:"dialog-actions"};function Xt(e,t,o,n,i,l){return e.noteDialog.isOpen?((0,r.uX)(),(0,r.CE)("div",{key:0,class:(0,a.C4)([{"tg-theme":e.isTelegram},"note-dialog-overlay"]),"data-theme":e.isDarkTheme?"dark":"light",onClick:t[5]||(t[5]=(0,s.D$)(((...e)=>l.closeDialog&&l.closeDialog(...e)),["self"]))},[(0,r.Lk)("div",Bt,[t[8]||(t[8]=(0,r.Lk)("h3",{class:"dialog-title"},"Редактирование заметки",-1)),(0,r.Lk)("div",Ft,[(0,r.Lk)("span",Vt,(0,a.v_)(l.currentNote.lesson),1),(0,r.Lk)("span",$t,(0,a.v_)(l.formattedTime),1)]),(0,r.bo)((0,r.Lk)("textarea",{"onUpdate:modelValue":t[0]||(t[0]=e=>l.currentNote.content=e),class:"dialog-textarea",placeholder:"Введите текст заметки...",ref:"textarea",onClick:t[1]||(t[1]=(...e)=>l.focusTextarea&&l.focusTextarea(...e))},null,512),[[s.Jo,l.currentNote.content]]),(0,r.Lk)("div",Ut,[(0,r.Lk)("button",{onClick:t[2]||(t[2]=(...e)=>l.deleteNote&&l.deleteNote(...e)),class:"dialog-button delete"},t[6]||(t[6]=[(0,r.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{d:"M4 12L12 4M4 4L12 12",stroke:"white","stroke-width":"1.5","stroke-linecap":"round"})],-1),(0,r.eW)(" Удалить ")])),(0,r.Lk)("button",{onClick:t[3]||(t[3]=(...e)=>l.navigateToNote&&l.navigateToNote(...e)),class:"dialog-button view"},t[7]||(t[7]=[(0,r.Lk)("svg",{width:"16",height:"16",viewBox:"0 0 16 16",fill:"none",xmlns:"http://www.w3.org/2000/svg"},[(0,r.Lk)("path",{"fill-rule":"evenodd","clip-rule":"evenodd",d:"M11.78 7.47C11.9205 7.61063 11.9993 7.80125 11.9993 8C11.9993 8.19875 11.9205 8.38937 11.78 8.53L9.28 11.03C9.21134 11.1037 9.12854 11.1628 9.03654 11.2038C8.94454 11.2448 8.84522 11.2668 8.74452 11.2686C8.64382 11.2704 8.54379 11.2518 8.4504 11.2141C8.35701 11.1764 8.27218 11.1203 8.20096 11.049C8.12974 10.9778 8.0736 10.893 8.03588 10.7996C7.99816 10.7062 7.97963 10.6062 7.98141 10.5055C7.98319 10.4048 8.00523 10.3055 8.04622 10.2135C8.08721 10.1215 8.14631 10.0387 8.22 9.97L9.44 8.75H1.75C1.55109 8.75 1.36032 8.67098 1.21967 8.53033C1.07902 8.38968 1 8.19891 1 8C1 7.80109 1.07902 7.61032 1.21967 7.46967C1.36032 7.32902 1.55109 7.25 1.75 7.25H9.44L8.22 6.03C8.08752 5.88783 8.0154 5.69978 8.01882 5.50548C8.02225 5.31118 8.10097 5.12579 8.23838 4.98838C8.37579 4.85097 8.56118 4.77225 8.75548 4.76883C8.94978 4.7654 9.13782 4.83752 9.28 4.97L11.78 7.47ZM4 11.75C4 11.5511 4.07902 11.3603 4.21967 11.2197C4.36032 11.079 4.55109 11 4.75 11C4.94891 11 5.13968 11.079 5.28033 11.2197C5.42098 11.3603 5.5 11.5511 5.5 11.75V12C5.5 12.3978 5.65804 12.7794 5.93934 13.0607C6.22064 13.342 6.60218 13.5 7 13.5H12C12.3978 13.5 12.7794 13.342 13.0607 13.0607C13.342 12.7794 13.5 12.3978 13.5 12V4C13.5 3.60218 13.342 3.22064 13.0607 2.93934C12.7794 2.65804 12.3978 2.5 12 2.5H7C6.60218 2.5 6.22064 2.65804 5.93934 2.93934C5.65804 3.22064 5.5 3.60218 5.5 4V4.25C5.5 4.44891 5.42098 4.63968 5.28033 4.78033C5.13968 4.92098 4.94891 5 4.75 5C4.55109 5 4.36032 4.92098 4.21967 4.78033C4.07902 4.63968 4 4.44891 4 4.25V4C4 3.20435 4.31607 2.44129 4.87868 1.87868C5.44129 1.31607 6.20435 1 7 1H12C12.7956 1 13.5587 1.31607 14.1213 1.87868C14.6839 2.44129 15 3.20435 15 4V12C15 12.7956 14.6839 13.5587 14.1213 14.1213C13.5587 14.6839 12.7956 15 12 15H7C6.20435 15 5.44129 14.6839 4.87868 14.1213C4.31607 13.5587 4 12.7956 4 12V11.75Z",fill:"white"})],-1),(0,r.eW)(" К заметке ")])),(0,r.Lk)("button",{onClick:t[4]||(t[4]=(...e)=>l.saveNote&&l.saveNote(...e)),class:"dialog-button save"},"Сохранить")])])],10,Rt)):(0,r.Q3)("",!0)}var Gt={name:"NoteDialog",data(){return{localNote:{id:null,lesson:"",time:"",content:"",date:"",isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}}},created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme(),this.setupTelegramBackButton(),window.Telegram.WebApp.expand())},computed:{...(0,d.L8)(["noteDialog","getNoteById"]),initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||(this.isDarkTheme?"#18222d":"#ffffff")),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||(this.isDarkTheme?"#ffffff":"#000000")),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||(this.isDarkTheme?"#aaaaaa":"#707579")),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||(this.isDarkTheme?"#212529":"#f4f4f5"))},setupTelegramBackButton(){const e=window.Telegram.WebApp;e.BackButton.show(),e.BackButton.onClick((()=>{e.close()}))},currentNote(){const e=this.getNoteById(this.noteDialog.noteId);return e||this.localNote},formattedTime(){return this.currentNote.time?this.currentNote.time.replace("<br>"," - "):""}},methods:{...(0,d.i0)(["updateNote","deleteNote","closeNoteDialog","setActiveTab","setActiveNote"]),saveNote(){this.updateNote(this.currentNote),this.closeDialog()},closeDialog(){this.closeNoteDialog()},focusTextarea(){this.$refs.textarea?.focus()},navigateToNote(){this.setActiveTab("notes"),this.setActiveNote(this.currentNote.id),this.closeDialog()},deleteNote(){this.$store.dispatch("deleteNote",this.currentNote.id),this.closeDialog()}},watch:{"noteDialog.isOpen"(e){}}};const jt=(0,C.A)(Gt,[["render",Xt],["__scopeId","data-v-0132c1c2"]]);var Zt=jt;const Kt=["data-theme"];function Yt(e,t,o,s,n,i){return(0,r.uX)(),(0,r.CE)("div",{class:(0,a.C4)(["preloader",{"tg-theme":o.isTelegram}]),"data-theme":o.isDark?"dark":"light"},t[0]||(t[0]=[(0,r.Lk)("div",{class:"preloader__content"},[(0,r.Lk)("div",{class:"preloader__spinner"}),(0,r.Lk)("div",{class:"preloader__text"},"Загрузка")],-1)]),10,Kt)}var zt={name:"Preloader",props:{isTelegram:{type:Boolean,default:!1},isDark:{type:Boolean,default:!1}}};const Qt=(0,C.A)(zt,[["render",Yt],["__scopeId","data-v-66aaa39e"]]);var qt=Qt,Jt={name:"App",components:{Footer:_t,sked:Ye,Notes:ft,AddNoteModal:Ot,NoteDialog:Zt,Preloader:qt},data(){return{isLoading:!0,isTelegram:!1,isDarkTheme:!1,tgThemeParams:{}}},computed:{...(0,d.L8)(["activeTab"]),currentComponent(){return"schedule"===this.activeTab?"sked":"Notes"}},async created(){window.Telegram&&window.Telegram.WebApp&&(this.isTelegram=!0,this.initTelegramTheme(),this.setupTelegramBackButton(),window.Telegram.WebApp.expand());const e=new Promise((e=>setTimeout(e,2e3))),t=(async()=>{const e=new Date,t=["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],o=["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"];await Promise.all([this.$store.dispatch("initWeekNumber"),this.$store.dispatch("fetchFullWeekSchedule",{fullDayName:t[e.getDay()],date:e.getDate(),month:o[e.getMonth()],originalDate:e})])})();await Promise.all([e,t]).catch((e=>{console.error("Ошибка загрузки:",e)})),this.isLoading=!1},methods:{initTelegramTheme(){const e=window.Telegram.WebApp;this.tgThemeParams=e.themeParams||{},this.isDarkTheme="dark"===e.colorScheme,this.applyTelegramTheme(),e.onEvent("themeChanged",this.applyTelegramTheme)},applyTelegramTheme(){const e=window.Telegram.WebApp;this.isDarkTheme="dark"===e.colorScheme,document.documentElement.style.setProperty("--tg-bg-color",this.tgThemeParams.bg_color||(this.isDarkTheme?"#18222d":"#ffffff")),document.documentElement.style.setProperty("--tg-text-color",this.tgThemeParams.text_color||(this.isDarkTheme?"#ffffff":"#000000")),document.documentElement.style.setProperty("--tg-button-color",this.tgThemeParams.button_color||"#2481cc"),document.documentElement.style.setProperty("--tg-button-text-color",this.tgThemeParams.button_text_color||"#ffffff"),document.documentElement.style.setProperty("--tg-hint-color",this.tgThemeParams.hint_color||(this.isDarkTheme?"#aaaaaa":"#707579")),document.documentElement.style.setProperty("--tg-link-color",this.tgThemeParams.link_color||"#168acd"),document.documentElement.style.setProperty("--tg-secondary-bg-color",this.tgThemeParams.secondary_bg_color||(this.isDarkTheme?"#212529":"#f4f4f5"))},setupTelegramBackButton(){const e=window.Telegram.WebApp;e.BackButton.show(),e.BackButton.onClick((()=>{e.close()}))}}};const eo=(0,C.A)(Jt,[["render",c]]);var to=eo;const oo="0n3jzfgz-3000.inc1.devtunnels.ms";function so(e=new Date){const t=new Date(e.getFullYear(),8,1);e<t&&t.setFullYear(t.getFullYear()-1);const o=e-t,s=Math.floor(o/6048e5);return(s+1)%2+1}var ro=(0,d.y$)({state:{notes:JSON.parse(localStorage.getItem("notes"))||[],activeTab:"schedule",selectedDay:null,selectedDayIndex:0,days:[],isAddNoteModalOpen:!1,availableLessons:[],activeNoteId:null,noteDialog:{isOpen:!1,noteId:null},currentWeekOffset:0,currentWeekType:"week1",currentWeekNumber:parseInt(localStorage.getItem("currentWeekNumber"))||1,baseWeekNumber:null,weekDays:["Пн","Вт","Ср","Чт","Пт","Сб"],fullDayNames:["Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],monthNames:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],weeksData:{week1:{0:[],1:[],2:[],3:[],4:[],5:[]},week2:{0:[],1:[],2:[],3:[],4:[],5:[]}},currentGroup:localStorage.getItem("currentGroup")||null,currentTeacher:null,currentRoom:null,searchType:"group"},mutations:{UPDATE_WEEK_OFFSET_AND_NUMBER(e,{offset:t,weekNumber:o}){e.currentWeekOffset=t,e.currentWeekNumber=o,e.currentWeekType=`week${o}`},INIT_WEEK_NUMBER(e){e.currentWeekNumber=1,e.currentWeekType="week1",localStorage.setItem("currentWeekNumber","1")},SET_CURRENT_TEACHER(e,t){e.currentTeacher=t.displayQuery||t,e.searchType="teacher"},CLEAR_SEARCH(e){e.currentGroup=null,e.currentTeacher=null,e.currentRoom=null},ADD_NOTE(e,t){e.notes.push(t),localStorage.setItem("notes",JSON.stringify(e.notes))},UPDATE_NOTE(e,t){const o=e.notes.findIndex((e=>e.id===t.id));-1!==o&&(e.notes.splice(o,1,t),localStorage.setItem("notes",JSON.stringify(e.notes)))},DELETE_NOTE(e,t){e.notes=e.notes.filter((e=>e.id!==t)),localStorage.setItem("notes",JSON.stringify(e.notes))},SET_ACTIVE_TAB(e,t){e.activeTab=t},SET_SELECTED_DAY(e,t){e.selectedDay=t,t&&void 0!==t.dayIndex&&(e.selectedDayIndex=t.dayIndex)},SET_ADD_NOTE_MODAL(e,t){e.isAddNoteModalOpen=t},SET_AVAILABLE_LESSONS(e,t){e.availableLessons=t},SET_ACTIVE_NOTE(e,t){e.activeNoteId=t},OPEN_NOTE_DIALOG(e,t){e.noteDialog.isOpen=!0,e.noteDialog.noteId=t.noteId},CLOSE_NOTE_DIALOG(e){e.noteDialog.isOpen=!1,e.noteDialog.noteId=null},SET_WEEK_OFFSET(e,t){e.currentWeekOffset=t},SET_DAYS(e,t){e.days=t},SET_SELECTED_DAY_INDEX(e,t){e.selectedDayIndex=t},SET_FULL_WEEK_SCHEDULE(e,{dayIndex:t,schedule:o}){e.fullWeekSchedule[t]=o},SET_CURRENT_WEEK_TYPE(e,t){e.currentWeekType=t},SET_CURRENT_WEEK_NUMBER(e,t){e.currentWeekNumber=t,localStorage.setItem("currentWeekNumber",t.toString())},SET_BASE_WEEK_NUMBER(e,t){e.baseWeekNumber=t},SET_WEEK_SCHEDULE(e,{weekType:t,dayIndex:o,schedule:s}){e.weeksData[t][o]=s},SET_LOADING(e,t){e.isLoading=t},SET_ERROR(e,t){e.error=t},SET_CURRENT_GROUP(e,t){e.currentGroup=t,e.searchType="group",localStorage.setItem("currentGroup",t)},SET_CURRENT_TEACHER(e,t){e.currentTeacher=t,e.searchType="teacher"},SET_CURRENT_ROOM(e,t){e.currentRoom=t,e.searchType="room"},CLEAR_SCHEDULE(e){e.weeksData={week1:{0:[],1:[],2:[],3:[],4:[],5:[]},week2:{0:[],1:[],2:[],3:[],4:[],5:[]}}}},actions:{addNote({commit:e},t){e("ADD_NOTE",t)},updateNote({commit:e},t){e("UPDATE_NOTE",t)},deleteNote({commit:e},t){e("DELETE_NOTE",t)},setActiveTab({commit:e},t){e("SET_ACTIVE_TAB",t)},setSelectedDay({commit:e},t){e("SET_SELECTED_DAY",t)},setActiveNote({commit:e},t){e("SET_ACTIVE_NOTE",t),t&&setTimeout((()=>{e("SET_ACTIVE_NOTE",null)}),3e3)},openAddNoteModal({commit:e}){e("SET_ADD_NOTE_MODAL",!0)},closeAddNoteModal({commit:e}){e("SET_ADD_NOTE_MODAL",!1)},updateAvailableLessons({commit:e},t){e("SET_AVAILABLE_LESSONS",t)},openNoteDialog({commit:e},t){e("OPEN_NOTE_DIALOG",{noteId:t})},closeNoteDialog({commit:e}){e("CLOSE_NOTE_DIALOG")},updateDays({commit:e,state:t}){const o=new Date,s=new Date(o);s.setDate(o.getDate()+7*t.currentWeekOffset);const r=0===s.getDay()?6:s.getDay()-1;s.setDate(s.getDate()-r);const a=t.weekDays.map(((e,r)=>{const a=new Date(s);a.setDate(s.getDate()+r);const n=a.toDateString()===o.toDateString();return{date:a.getDate().toString().padStart(2,"0"),weekDay:e,month:t.monthNames[a.getMonth()],fullDate:a,isCurrentDay:n}}));if(e("SET_DAYS",a),null===t.selectedDayIndex&&0===t.currentWeekOffset){const t=a.findIndex((e=>e.isCurrentDay));-1!==t&&e("SET_SELECTED_DAY_INDEX",t)}},changeWeek({commit:e,dispatch:t,state:o},s){const r=o.baseWeekNumber||1;let a=r;0!==s&&(a=(r+s)%2,a=0===a?2:a),e("UPDATE_WEEK_OFFSET_AND_NUMBER",{offset:s,weekNumber:a}),t("updateDays")},updateWeekNumber({commit:e,state:t},o){const s=t.baseWeekNumber||1,r=((s-1+o)%2+2)%2+1;e("SET_CURRENT_WEEK_NUMBER",r)},selectDay({commit:e,state:t},o){e("SET_SELECTED_DAY_INDEX",o);const s=t.days[o];e("SET_SELECTED_DAY",{fullDayName:t.fullDayNames[o],date:s.date,month:s.month,originalDate:s.fullDate})},navigateDay({commit:e,state:t,dispatch:o},s){if(null===t.selectedDayIndex||!t.days.length)return;const r=t.selectedDayIndex+s;if(r>=0&&r<t.days.length)o("selectDay",r);else{const e=t.currentWeekOffset+(s>0?1:-1);e>=-2&&e<=2&&o("changeWeek",e).then((()=>{const e=s>0?0:t.days.length-1;o("selectDay",e)}))}},updateFullWeekSchedule({commit:e},{dayIndex:t,schedule:o}){e("SET_FULL_WEEK_SCHEDULE",{dayIndex:t,schedule:o})},async searchSchedule({commit:e,dispatch:t},{type:o,query:s}){try{switch(e("SET_LOADING",!0),e("CLEAR_SCHEDULE"),e("CLEAR_SEARCH"),o){case"group":e("SET_CURRENT_GROUP",s);break;case"teacher":e("SET_CURRENT_TEACHER",s);break;case"room":e("SET_CURRENT_ROOM",s);break}await t("fetchFullWeekSchedule")}catch(r){e("SET_ERROR",r.message),console.error("Ошибка поиска:",r)}finally{e("SET_LOADING",!1)}},async fetchFullWeekSchedule({commit:e,state:t}){try{let o,s;switch(e("SET_LOADING",!0),e("CLEAR_SCHEDULE"),t.searchType){case"group":if(!t.currentGroup)return;o="groups",s=encodeURIComponent(t.currentGroup);break;case"teacher":if(!t.currentTeacher)return;o="teachers",s=encodeURIComponent(t.currentTeacher);break;case"room":if(!t.currentRoom)return;o="rooms",s=encodeURIComponent(t.currentRoom);break;default:return}const r=await fetch(`https://${oo}/api/${o}/${s}`);if(!r.ok)throw new Error("Ошибка загрузки расписания");const a=await r.json();console.log("Получены данные расписания:",a);const n=so();console.log("Математически рассчитанная неделя:",n);const i=[...new Set(a.lessons.map((e=>e.numberWeek)))];console.log("Недели в API:",i);const l=i.includes(n)?n:i.includes(1)?1:2;console.log("Установлена базовая неделя:",l),e("SET_BASE_WEEK_NUMBER",l),e("SET_CURRENT_WEEK_NUMBER",l),e("SET_CURRENT_WEEK_TYPE",`week${l}`);const c=e=>{const t={1:"08:00<br>09:30",2:"09:45<br>11:15",3:"11:30<br>13:00",4:"13:50<br>15:20",5:"15:35<br>17:05",6:"17:20<br>18:50",11:"08:00<br>09:30",12:"09:45<br>11:15",13:"11:30<br>13:00",14:"13:15<br>14:45",15:"15:00<br>16:30",16:"16:45<br>18:15"};return t[e]||""},d={week1:{0:[],1:[],2:[],3:[],4:[],5:[]},week2:{0:[],1:[],2:[],3:[],4:[],5:[]}};a.lessons.forEach((e=>{const o=`week${e.numberWeek}`,s=e.numberDay-1;let r=6===e.numberDay?e.number+10:e.number;const a={time:c(r),type:e.type,lesson:e.name,weekNumber:e.numberWeek};"group"===t.searchType?a.teachers=e.details||[]:"teacher"===t.searchType?(a.room=e.room||"",a.details=e.details||[]):"room"===t.searchType&&(a.details=e.details?.map((e=>({name:e.name,groups:e.groups||[]})))||[]),d[o][s].push(a)}));for(const t of["week1","week2"])for(let o=0;o<6;o++)e("SET_WEEK_SCHEDULE",{weekType:t,dayIndex:o,schedule:d[t][o]||[]})}catch(o){console.error("Ошибка загрузки расписания:",o),e("SET_ERROR",o.message)}finally{e("SET_LOADING",!1)}},setCurrentWeekType({commit:e},t){e("SET_CURRENT_WEEK_TYPE",t)},updateWeekSchedule({commit:e},{weekType:t,dayIndex:o,schedule:s}){e("SET_WEEK_SCHEDULE",{weekType:t,dayIndex:o,schedule:s})},updateWeekOffset({commit:e},t){e("SET_WEEK_OFFSET",t)},initWeekNumber({commit:e}){e("INIT_WEEK_NUMBER")}},getters:{getNotes:e=>e.notes,activeTab:e=>e.activeTab,selectedDay:e=>e.selectedDay,isAddNoteModalOpen:e=>e.isAddNoteModalOpen,availableLessons:e=>e.availableLessons.filter((e=>e.lesson)),activeNoteId:e=>e.activeNoteId,noteDialog:e=>e.noteDialog,getNoteById:e=>t=>e.notes.find((e=>e.id===t)),days:e=>e.days.map(((t,o)=>({...t,fullDayName:e.fullDayNames[o],month:e.monthNames[new Date(t.originalDate).getMonth()]}))),currentWeekOffset:e=>e.currentWeekOffset,selectedDayIndex:e=>e.selectedDayIndex,canNavigatePrev:e=>e.currentWeekOffset>-2,canNavigateNext:e=>e.currentWeekOffset<2,currentWeekType:e=>e.currentWeekType,currentWeekSchedule:e=>e.weeksData[e.currentWeekType]||{},currentWeekNumber:e=>e.currentWeekNumber,currentGroup:e=>e.currentGroup,searchType:e=>e.searchType,currentTeacher:e=>e.currentTeacher,currentRoom:e=>e.currentRoom,baseWeekNumber:e=>e.baseWeekNumber,getWeekTypeByOffset:e=>e=>{const t=Math.abs(e);return t%2===0?"week1":"week2"},monthNames:e=>e.monthNames,fullWeekSchedule:(e,t)=>t.currentWeekSchedule}});const ao=(0,s.Ef)(to);ao.config.globalProperties.$tg=window.Telegram?.WebApp;const no=()=>{const e=window.Telegram?.WebApp;if(!e)return;const t=e.themeParams||{},o=document.documentElement;o.style.setProperty("--tg-bg-color",t.bg_color||"#ffffff"),o.style.setProperty("--tg-text-color",t.text_color||"#000000"),o.style.setProperty("--tg-button-color",t.button_color||"#2481cc"),o.style.setProperty("--tg-button-text-color",t.button_text_color||"#ffffff"),"dark"===e.colorScheme?document.body.classList.add("tg-dark"):document.body.classList.remove("tg-dark")};no(),window.Telegram?.WebApp?.onEvent("themeChanged",no),ao.use(ro),ao.mount("#app")}},t={};function o(s){var r=t[s];if(void 0!==r)return r.exports;var a=t[s]={exports:{}};return e[s].call(a.exports,a,a.exports,o),a.exports}o.m=e,function(){var e=[];o.O=function(t,s,r,a){if(!s){var n=1/0;for(d=0;d<e.length;d++){s=e[d][0],r=e[d][1],a=e[d][2];for(var i=!0,l=0;l<s.length;l++)(!1&a||n>=a)&&Object.keys(o.O).every((function(e){return o.O[e](s[l])}))?s.splice(l--,1):(i=!1,a<n&&(n=a));if(i){e.splice(d--,1);var c=r();void 0!==c&&(t=c)}}return t}a=a||0;for(var d=e.length;d>0&&e[d-1][2]>a;d--)e[d]=e[d-1];e[d]=[s,r,a]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var s in t)o.o(t,s)&&!o.o(e,s)&&Object.defineProperty(e,s,{enumerable:!0,get:t[s]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){var e={524:0};o.O.j=function(t){return 0===e[t]};var t=function(t,s){var r,a,n=s[0],i=s[1],l=s[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(r in i)o.o(i,r)&&(o.m[r]=i[r]);if(l)var d=l(o)}for(t&&t(s);c<n.length;c++)a=n[c],o.o(e,a)&&e[a]&&e[a][0](),e[a]=0;return o.O(d)},s=self["webpackChunksked_vue_app"]=self["webpackChunksked_vue_app"]||[];s.forEach(t.bind(null,0)),s.push=t.bind(null,s.push.bind(s))}();var s=o.O(void 0,[504],(function(){return o(2559)}));s=o.O(s)})();
//# sourceMappingURL=app.ac9c0fa3.js.map